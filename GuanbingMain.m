% GuanbingMain.m 入口
% 将 root 指向东华数据根目录（包含 YYYY-MM-DD 子目录）

% 确保 config/pipeline/analysis/scripts 在路径中
here = fileparts(mfilename('fullpath'));
addpath(fullfile(here,'config'));
addpath(fullfile(here,'pipeline'));
addpath(fullfile(here,'analysis'));
addpath(fullfile(here,'scripts'));

root        = 'F:\桥梁数据\桥梁8月数据'; % TODO: 按实际路径修改
start_date  = '2025-08-11';
end_date    = '2025-08-12';

% 读取配置（可改为自定义 JSON 路径）
cfg = load_config();

% 在此处切换开关
opts = struct( ...
    'precheck_zip_count',         false, ...
    'doUnzip',                    false, ...
    'doRenameCsv',                false, ...
    'doRemoveHeader',             false, ...
    'doResample',                 false, ...
    'doTemp',                     false, ...
    'doHumidity',                 false, ...
    'doDeflect',                  true, ...
    'doTilt',                     false, ...
    'doAccel',                    false, ...
    'doAccelSpectrum',            false,  ...   % 是否计算加速度频谱
    'doRenameCrk',                false, ...
    'doCrack',                    false, ...
    'doStrain',                   false, ...
    'doDynStrainBoxplot',         false ...     % 新增：动态应变箱线图
    );

run_all(root, start_date, end_date, opts, cfg);
